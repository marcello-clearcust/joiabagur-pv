# T-EP7-001-011: Implement unit tests for frontend AuthService

## Purpose

Create unit tests for the frontend AuthService to ensure API communication, token management, and authentication logic work correctly in isolation.

## Details

### Test Scenarios
- **Successful login**: Should call API and store token on success
- **Login failure**: Should handle API errors and not store invalid tokens
- **Token storage**: Should securely store and retrieve JWT tokens
- **Token validation**: Should validate token presence and expiration
- **Logout**: Should clear stored tokens and user data
- **HTTP interceptor**: Should include tokens in API requests

### Testing Approach
- Use Vitest as test runner
- Mock API calls using MSW (Mock Service Worker)
- Test service methods in isolation
- Use proper cleanup between tests
- Test error handling and edge cases

### Mock Configuration
- Configure MSW handlers for authentication endpoints
- Mock successful and failed login responses
- Mock network errors and timeouts
- Test different API response scenarios

### Test Organization
- Tests named with descriptive pattern: `should [behavior] when [condition]`
- Example: `should store token when login succeeds`
- Group related tests in describe blocks

## Acceptance Criteria

- [ ] Unit tests cover all AuthService public methods
- [ ] API calls are properly mocked using MSW
- [ ] Token storage and retrieval works correctly
- [ ] Error handling scenarios are tested
- [ ] Tests use Vitest framework with proper setup
- [ ] Test naming follows established conventions
- [ ] Tests achieve minimum 70% code coverage for AuthService

## Priority
Medium

## Estimation
3 SP

## Dependencies
- T-EP7-001-007 (frontend authentication services)

## Tags
EP7, HU-EP7-001, tests, unit-tests, frontend, vitest, msw, auth-service

## Links
- User Story: `Documentos/Historias/HU-EP7-001.md`
- Testing Guide: `Documentos/Testing/Frontend/04-mocking-api.md` (MSW setup)
- AuthService: `Tickets/EP7/HU-EP7-001/T-EP7-001-007.md`
- Frontend Testing: `Documentos/Testing/Frontend/02-tests-unitarios.md`



