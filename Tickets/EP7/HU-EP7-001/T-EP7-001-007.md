# T-EP7-001-007: Implement frontend authentication services

## Purpose

Create the frontend authentication services that handle API communication, token management, and session state. This includes HTTP client configuration, token storage, and user context management.

## Details

### AuthService Implementation
- Create AuthService for API communication with backend
- Implement login method that calls POST /api/auth/login
- Handle authentication responses and token extraction
- Implement logout functionality
- Add error handling for network failures and API errors

### Token Management
- Implement secure token storage (localStorage for development, httpOnly cookies for production)
- Create token validation and expiration checking
- Implement automatic token refresh (if supported by backend)
- Handle token cleanup on logout

### HTTP Interceptor
- Create Axios/Fetch interceptor to automatically include JWT token in API requests
- Handle 401 responses by redirecting to login
- Implement request/response logging for debugging

### User Context/State Management
- Create React context for user authentication state
- Implement AuthProvider component
- Provide hooks for accessing current user, login status, and role
- Handle authentication state persistence across browser sessions

### API Client Structure
- Organize services following the pattern from Metronic analysis
- Create auth.service.ts with login/logout methods
- Implement proper TypeScript interfaces for API requests/responses

## Acceptance Criteria

- [ ] AuthService communicates with backend authentication API
- [ ] JWT tokens are securely stored and managed
- [ ] HTTP interceptor automatically includes tokens in requests
- [ ] User authentication state is properly managed
- [ ] Login/logout functionality works end-to-end
- [ ] Token expiration is handled gracefully
- [ ] React context provides authentication state to components
- [ ] TypeScript interfaces match backend API contracts

## Priority
High

## Estimation
5 SP

## Dependencies
- T-EP7-001-004 (authentication API controller)
- T-EP7-001-005 (authentication routing configuration)

## Tags
EP7, HU-EP7-001, frontend, auth-service, jwt, http-client, context, typescript

## Links
- User Story: `Documentos/Historias/HU-EP7-001.md`
- Metronic Services: `Documentos/Propuestas/analisis-metronic-frontend.md` (section 7.4: API Client structure)
- Backend API: `Tickets/EP7/HU-EP7-001/T-EP7-001-004.md` (AuthController specification)
- Architecture: `Documentos/modelo-c4.md` (Frontend Auth Module)




