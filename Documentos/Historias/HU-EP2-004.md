# HU-EP2-004: Realizar ajuste manual de inventario

## Formato estándar

Como **administrador**, quiero **realizar ajustes manuales de inventario** para **corregir discrepancias de stock o registrar movimientos no relacionados con ventas**.

---

## Descripción

Permite ajustar manualmente el stock de un producto en un punto de venta, registrando motivo y generando movimiento de tipo "Adjustment".

**Nota importante:** Este ajuste solo funciona para productos **ya asignados** al punto de venta (con registro activo en `Inventory`). Para asignar productos nuevos al POS, usar HU-EP2-006 (Asignar productos a puntos de venta).

---

## Criterios de Aceptación

### Escenario 1: Ajuste manual exitoso
**Dado que** un producto tiene stock 10  
**Cuando** realizo ajuste de +5 con motivo "Corrección de inventario"  
**Entonces** el stock se actualiza a 15  
**Y** se crea movimiento en `InventoryMovement` tipo "Adjustment"  
**Y** se registra el motivo

### Escenario 2: Stock no puede ser negativo
**Dado que** un producto tiene stock 3  
**Cuando** intento ajustar -5  
**Entonces** el sistema muestra error: "El stock no puede ser negativo"  
**Y** no se realiza el ajuste

### Escenario 3: Intentar ajustar producto no asignado al POS
**Dado que** un producto existe en el catálogo global  
**Y** NO tiene registro en `Inventory` para el punto de venta seleccionado  
**Cuando** intento realizar un ajuste manual  
**Entonces** el sistema muestra error: "El producto no está asignado a este punto de venta"  
**Y** sugiere usar HU-EP2-006 para asignar el producto primero

---

## Tareas

1. Backend: Endpoint `POST /api/inventory/adjustment` con validación de stock no negativo
2. Frontend: Formulario de ajuste con motivo obligatorio

---

## Estimaciones y atributos de priorización

- **Puntos de historia:** _Pendiente_
- **Dependencias:** HU-EP2-002

