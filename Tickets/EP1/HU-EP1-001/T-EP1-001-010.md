# T-EP1-001-010: Integration tests for product import endpoint

## Title
Integration tests for product import endpoint

## Description

Create integration tests for the product import API endpoint using WebApplicationFactory, Testcontainers with PostgreSQL, and real file uploads to ensure end-to-end functionality.

**Purpose:**
- Test complete import workflow from API to database
- Verify authentication, authorization, and file handling
- Ensure data persistence and business rules enforcement
- Validate error responses and edge cases

**Details:**
- Use WebApplicationFactory for API testing
- Testcontainers with PostgreSQL for real database operations
- Test file upload scenarios (valid/invalid files, different sizes)
- Test authentication (unauthorized, wrong role)
- Test complete import flow with database verification
- Test error scenarios (invalid Excel, duplicate SKUs, etc.)
- Verify response formats and status codes

**References:**
- Testing guide: `Documentos/Testing/Backend/03-testcontainers.md`
- File upload guide: `Documentos/Testing/Backend/09-archivos-uploads.md`
- User Story scenarios: All acceptance criteria in HU-EP1-001
- Stack: WebApplicationFactory, Testcontainers, PostgreSQL

## Acceptance Criteria

- [ ] Complete import workflow tested (upload → validation → processing → database)
- [ ] Authentication and authorization tested
- [ ] File validation tested (format, size, content)
- [ ] Database state verified after successful imports
- [ ] Error responses tested for all failure scenarios
- [ ] Real Excel files used for testing (not mocks)
- [ ] Testcontainers setup for isolated database testing
- [ ] API response format validation

## Priority
Medium (ensures API reliability and security)

## Estimation
5 SP

## Assignment
Backend - Tests

## Tags
HU-EP1-001, test, integration-test, testcontainers, postgresql, webapplicationfactory, api, product-module

## Links
- User Story: `Documentos/Historias/HU-EP1-001.md`
- Testing Guides: `Documentos/Testing/Backend/03-testcontainers.md`, `Documentos/Testing/Backend/09-archivos-uploads.md`
- Depends on: T-EP1-001-008
