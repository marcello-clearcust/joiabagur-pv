# T-EP1-007-001: Create product search API endpoint

## Title
Create product search API endpoint with role-based filtering

## Description

Implement GET /api/products/search endpoint for SKU exact match and name partial search functionality with role-based filtering. **Administrators search all products. Operators search only products with Inventory records at their assigned POS.**

**Purpose:**
- Enable fast product lookup by SKU or name (filtered by role)
- Support manual sales registration workflows
- Provide search results for product selection
- Enforce inventory-based access control for operators

**Details:**
- GET /api/products/search?query={term}
- Exact match for SKU field (filtered by role)
- Partial match for Name field (case-insensitive, filtered by role)
- **Apply same inventory-based filtering as catalog endpoint for operators**
- Return matching products with basic info and quantity
- Include primary photo and available quantity in results
- Limit results for performance (max 50)
- Extract user context from JWT claims
- Return empty array (not 404) when no accessible results found

## Acceptance Criteria

- [ ] SKU exact search working with role-based filtering
- [ ] Name partial search implemented with role-based filtering
- [ ] Administrators search across all products
- [ ] Operators search only products in their POS inventories
- [ ] Case-insensitive search
- [ ] Performance optimized with inventory filtering
- [ ] Results include primary photos and quantity
- [ ] Returns empty array for no accessible results (not 404)
- [ ] Query validation (min 2 characters)

## Priority
High (essential for sales workflows)

## Estimation
2 SP

## Assignment
Backend - API

## Tags
HU-EP1-007, api, search, sku, product-module

## Links
- User Story: `Documentos/Historias/HU-EP1-007.md`
- Depends on: T-EP1-006-001
