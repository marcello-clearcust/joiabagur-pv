# HU-EP3-002: Registrar venta manual (sin foto)

## Formato estándar

Como **operador**, quiero **registrar una venta manualmente buscando el producto** para **poder registrar ventas cuando el reconocimiento de imagen no es posible o no es fiable**.

---

## Descripción

Permite registrar una venta buscando el producto por SKU o nombre, seleccionándolo, validando stock disponible, seleccionando método de pago y confirmando la venta. Incluye las mismas validaciones que HU-EP3-001 pero sin foto.

---

## Criterios de Aceptación

### Escenario 1: Venta manual exitosa
**Dado que** soy un operador autenticado  
**Y** busco un producto por SKU o nombre  
**Y** el producto tiene stock disponible  
**Cuando** selecciono el producto, valido stock y selecciono método de pago  
**Entonces** el sistema registra la venta exitosamente  
**Y** se crea registro en `Sale` sin foto (`SalePhoto` null)  
**Y** se actualiza el stock automáticamente

### Escenario 2: Stock insuficiente
**Dado que** un producto tiene stock 0  
**Cuando** intento registrar venta manual de ese producto  
**Entonces** el sistema muestra error: "Stock insuficiente"  
**Y** no se registra la venta

### Escenario 3: Producto no encontrado
**Dado que** busco un SKU que no existe  
**Cuando** realizo la búsqueda  
**Entonces** el sistema muestra: "Producto no encontrado"  
**Y** puedo intentar con otro SKU o nombre

---

## Notas adicionales

- **Reutilización:** Usar los mismos servicios compartidos de validación que HU-EP3-001
- **Sin foto:** `SalePhoto` será null para ventas manuales

---

## Tareas

1. Backend: Reutilizar endpoint y servicios de HU-EP3-001
2. Frontend: Formulario de venta manual con búsqueda de producto
3. Frontend: Integración con HU-EP1-007 (búsqueda de productos)

---

## Estimaciones y atributos de priorización

- **Puntos de historia:** _Pendiente_
- **Dependencias:** HU-EP3-001 (comparte validaciones), HU-EP1-007

