# HU-EP1-004: Subir fotos de referencia a producto

## Formato estándar

Como **administrador**, quiero **subir fotos de referencia a productos** para **permitir el reconocimiento de imágenes mediante IA**.

---

## Descripción

Permite subir múltiples fotos (JPG, PNG) a un producto. Las fotos se almacenan en sistema de archivos local (desarrollo) o S3/Blob Storage (producción). Al menos una foto es recomendable para reconocimiento de imágenes.

---

## Criterios de Aceptación

### Escenario 1: Subir foto exitosamente
**Dado que** existe un producto  
**Cuando** subo una foto (JPG o PNG)  
**Entonces** el sistema guarda la foto  
**Y** crea registro en `ProductPhoto`  
**Y** muestra la foto en la galería del producto

### Escenario 2: Subir múltiples fotos
**Dado que** un producto tiene fotos  
**Cuando** subo fotos adicionales  
**Entonces** todas las fotos se guardan correctamente  
**Y** se ordenan por `DisplayOrder`

### Escenario 3: Formato inválido
**Dado que** intento subir un archivo RAW o BMP  
**Cuando** subo el archivo  
**Entonces** el sistema muestra error: "Solo se permiten formatos JPG y PNG"  
**Y** no se guarda la foto

### Escenario 4: Marcar foto como principal
**Dado que** un producto tiene múltiples fotos  
**Cuando** marco una foto como principal  
**Entonces** `IsPrimary = true` para esa foto  
**Y** `IsPrimary = false` para las demás

---

## Tareas

1. Backend: Endpoint `POST /api/products/{id}/photos` con almacenamiento dual (local/S3)
2. Backend: Servicio de almacenamiento de archivos (`IFileStorageService`)
3. Frontend: Componente de carga de fotos con preview
4. Validaciones: Formatos permitidos (JPG, PNG), tamaño máximo

---

## Estimaciones y atributos de priorización

- **Puntos de historia:** _Pendiente_
- **Dependencias:** HU-EP1-002, estrategia de almacenamiento definida

