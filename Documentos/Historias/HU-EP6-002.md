# HU-EP6-002: Asignar métodos de pago a punto de venta

## Formato estándar

Como **administrador**, quiero **asignar métodos de pago específicos a cada punto de venta** para **definir qué métodos de pago están disponibles al registrar ventas en ese punto de venta**.

---

## Descripción

El sistema debe permitir a los administradores asignar métodos de pago activos a puntos de venta específicos. Solo los métodos asignados a un punto de venta estarán disponibles al registrar ventas en ese punto de venta.

---

## Criterios de Aceptación

### Escenario 1: Asignar método de pago a punto de venta
**Dado que** soy un administrador autenticado  
**Y** existe un punto de venta y un método de pago activo  
**Cuando** asigno el método de pago al punto de venta  
**Entonces** se crea registro en `PointOfSalePaymentMethod`  
**Y** `IsActive = true`  
**Y** el método está disponible al registrar ventas en ese punto de venta

### Escenario 2: Asignar múltiples métodos de pago
**Dado que** existen varios métodos de pago activos  
**Cuando** asigno múltiples métodos a un punto de venta  
**Entonces** todos los métodos asignados están disponibles para ese punto de venta

### Escenario 3: Asignación duplicada
**Dado que** un método de pago ya está asignado a un punto de venta  
**Cuando** intento asignarlo nuevamente  
**Entonces** el sistema muestra error o ignora la asignación duplicada  
**Y** se mantiene la asignación existente

### Escenario 4: No asignar método inactivo
**Dado que** existe un método de pago con `IsActive = false`  
**Cuando** intento asignarlo a un punto de venta  
**Entonces** el sistema muestra advertencia: "Solo se pueden asignar métodos de pago activos"  
**Y** no se realiza la asignación

---

## Tareas

1. Backend: Endpoint `POST /api/point-of-sales/{id}/payment-methods/{paymentMethodId}`
2. Backend: Validar que método de pago está activo
3. Frontend: Interfaz de asignación (multi-select o checkboxes)
4. Validaciones: Constraint único en `(PointOfSaleId, PaymentMethodId)`

---

## Estimaciones y atributos de priorización

- **Puntos de historia:** _Pendiente_
- **Dependencias:** HU-EP6-001, HU-EP8-001

