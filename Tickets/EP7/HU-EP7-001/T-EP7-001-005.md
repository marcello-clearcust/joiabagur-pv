# T-EP7-001-005: Configure authentication routing and protected routes

## Purpose

Configure the routing system to support authentication flows, including public login routes and protected routes that require authentication. Update the app routing to use Layout 8 and implement route guards for role-based access.

## Details

### Layout Configuration
- Update app-routing-setup.tsx to use Layout 8 as the default authenticated layout
- Configure Layout 8 sidebar menu to include navigation for authenticated users
- Remove demo layouts and routes (layout-1, layout-2, etc.)

### Route Structure
- Public route: `/login` (no authentication required)
- Protected routes: `/dashboard`, `/products`, `/sales`, etc. (require authentication)
- Redirect logic: unauthenticated users → `/login`, authenticated users → `/dashboard`

### Route Guards
- Implement authentication route guard component
- Check JWT token presence and validity before allowing access
- Redirect to login on token expiration or invalid tokens
- Role-based route protection (Admin vs Operator routes)

### Navigation Configuration
- Configure sidebar menu items based on user role
- Admin: full menu access
- Operator: limited menu (sales, inventory, returns)
- Update layout-8.config.tsx with proper menu structure

## Acceptance Criteria

- [ ] App routing uses Layout 8 as default layout for authenticated users
- [ ] Public login route `/login` is accessible without authentication
- [ ] Protected routes require valid JWT token
- [ ] Invalid/expired tokens redirect to login page
- [ ] Sidebar menu shows appropriate items based on user role
- [ ] Unauthenticated users are redirected to login
- [ ] Authenticated users are redirected to dashboard

## Priority
High

## Estimation
3 SP

## Tags
EP7, HU-EP7-001, frontend, routing, layout-8, metronic, protected-routes

## Links
- User Story: `Documentos/Historias/HU-EP7-001.md`
- Metronic Analysis: `Documentos/Propuestas/analisis-metronic-frontend.md` (section 2: Layout 8, section 4: Routing)
- Architecture: `Documentos/modelo-c4.md` (Frontend Auth Module)




